FROM rockylinux:8
RUN yum -y update
RUN yum install -y python3 python3-pip gcc git
RUN pip3 install wheel
RUN git clone https://github.com/pyinstaller/pyinstaller
RUN pip3 install pyinstaller
WORKDIR /src
COPY lib /src/lib
COPY requirements.txt carbonio-mailbox-exporter.py /src
RUN pip3 install -r requirements.txt
RUN pyinstaller carbonio-mailbox-exporter.py  --onefile