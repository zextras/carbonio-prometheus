FROM ubuntu:22.04
ENV DEBIAN_FRONTEND=noninteractive
RUN apt-get update
RUN apt-get install -y python3 python3-dev python3-pip git iputils-ping dnsutils
RUN pip3 install pyinstaller
WORKDIR /src
COPY lib /src/lib
COPY requirements.txt carbonio-mailbox-exporter.py /src
RUN pip3 install -r requirements.txt
RUN pyinstaller carbonio-mailbox-exporter.py  --onefile